<Window x:Class="Mideej.Views.ThemeEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:Mideej.Controls"
        xmlns:vm="clr-namespace:Mideej.ViewModels"
        Title="Theme Editor"
        Height="700"
        Width="900"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResize"
        MinWidth="700"
        MinHeight="600">
    <Window.Resources>
        <Style TargetType="TextBlock" x:Key="ColorLabel">
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
            <Setter Property="FontSize" Value="{DynamicResource BaseFontSize}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,12,0"/>
        </Style>

        <Style TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="FontSize" Value="{DynamicResource BaseFontSize}"/>
        </Style>
    </Window.Resources>

    <Border Background="{DynamicResource BackgroundBrush}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="8">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Grid Grid.Row="0" Margin="0,0,0,20" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown" Background="Transparent">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Theme Editor"
                           FontSize="{DynamicResource FontSizeTitle}"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           Cursor="Hand"/>

                <Button Grid.Column="1"
                        Content="âœ•"
                        Width="32"
                        Height="32"
                        FontSize="16"
                        Click="Close_Click"
                        Style="{StaticResource IconButton}"
                        ToolTip="Close"/>
            </Grid>

            <!-- Theme Name Section -->
            <Grid Grid.Row="1" Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="16"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Theme Name:"
                           Style="{StaticResource ColorLabel}"
                           Width="120"/>
                <StackPanel Grid.Column="1">
                    <TextBox Text="{Binding ThemeName, UpdateSourceTrigger=PropertyChanged}"
                             IsEnabled="{Binding IsNewTheme}"/>
                    <TextBlock Text="Note: Spaces and special characters will be removed"
                               Style="{StaticResource SubtitleTextBlock}"
                               FontSize="10"
                               Margin="0,2,0,0"
                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                </StackPanel>

                <TextBlock Grid.Column="3"
                           Text="Display Name:"
                           Style="{StaticResource ColorLabel}"
                           Width="120"/>
                <TextBox Grid.Column="4"
                         Text="{Binding ThemeDisplayName, UpdateSourceTrigger=PropertyChanged}"/>
            </Grid>

            <!-- Scrollable Color Picker Section -->
            <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- Background Colors Section -->
                    <Border Style="{StaticResource Card}" Margin="0,0,0,16">
                        <StackPanel>
                            <TextBlock Text="Background Colors"
                                       FontSize="{DynamicResource FontSizeLarge}"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource TextPrimaryBrush}"
                                       Margin="0,0,0,16"/>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Background" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding BackgroundColor, Mode=TwoWay}"/>
                            </Grid>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Surface" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding SurfaceColor, Mode=TwoWay}"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Surface Highlight" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding SurfaceHighlightColor, Mode=TwoWay}"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Interactive Colors Section -->
                    <Border Style="{StaticResource Card}" Margin="0,0,0,16">
                        <StackPanel>
                            <TextBlock Text="Interactive Colors"
                                       FontSize="{DynamicResource FontSizeLarge}"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource TextPrimaryBrush}"
                                       Margin="0,0,0,16"/>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Primary" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding PrimaryColor, Mode=TwoWay}"/>
                            </Grid>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Primary Dark" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding PrimaryDarkColor, Mode=TwoWay}"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Accent" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding AccentColor, Mode=TwoWay}"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Text Colors Section -->
                    <Border Style="{StaticResource Card}" Margin="0,0,0,16">
                        <StackPanel>
                            <TextBlock Text="Text Colors"
                                       FontSize="{DynamicResource FontSizeLarge}"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource TextPrimaryBrush}"
                                       Margin="0,0,0,16"/>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Primary Text" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding TextPrimaryColor, Mode=TwoWay}"/>
                            </Grid>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Secondary Text" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding TextSecondaryColor, Mode=TwoWay}"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Border" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding BorderColor, Mode=TwoWay}"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- State Colors Section -->
                    <Border Style="{StaticResource Card}">
                        <StackPanel>
                            <TextBlock Text="State Colors"
                                       FontSize="{DynamicResource FontSizeLarge}"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource TextPrimaryBrush}"
                                       Margin="0,0,0,16"/>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Error" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding ErrorColor, Mode=TwoWay}"/>
                            </Grid>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Warning" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding WarningColor, Mode=TwoWay}"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Success" Style="{StaticResource ColorLabel}"/>
                                <controls:ColorPickerControl Grid.Column="1" SelectedColor="{Binding SuccessColor, Mode=TwoWay}"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- Status Message -->
            <TextBlock Grid.Row="3"
                       Text="{Binding StatusMessage}"
                       Foreground="{DynamicResource AccentBrush}"
                       FontSize="{DynamicResource BaseFontSize}"
                       Margin="0,12,0,12"
                       TextWrapping="Wrap"/>

            <!-- Action Buttons -->
            <Grid Grid.Row="4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0"
                        Content="Reset"
                        Width="100"
                        Height="36"
                        Margin="0,0,8,0"
                        Command="{Binding ResetToOriginalCommand}"
                        Style="{StaticResource ModernButton}"
                        ToolTip="Reset to original colors"/>

                <Button Grid.Column="1"
                        Content="Export"
                        Width="100"
                        Height="36"
                        Margin="0,0,8,0"
                        Command="{Binding ExportThemeCommand}"
                        Style="{StaticResource ModernButton}"
                        ToolTip="Export theme to file"/>

                <Button Grid.Column="3"
                        Content="Cancel"
                        Width="100"
                        Height="36"
                        Margin="0,0,8,0"
                        Click="Cancel_Click"
                        Style="{StaticResource ModernButton}"/>

                <Button Grid.Column="4"
                        Content="Save"
                        Width="100"
                        Height="36"
                        Command="{Binding SaveThemeCommand}"
                        Style="{StaticResource ModernButton}"/>
            </Grid>
        </Grid>
    </Border>
</Window>
