<Window x:Class="Mideej.Controls.ColorPickerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Pick Color"
        Height="380"
        Width="400"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize">
    <Border Background="{DynamicResource BackgroundBrush}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="8">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Grid Grid.Row="0" Margin="0,0,0,20">
                <TextBlock Text="Pick Color"
                           FontSize="{DynamicResource FontSizeLarge}"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextPrimaryBrush}"/>
            </Grid>

            <!-- Color Preview -->
            <Border Grid.Row="1"
                    Height="80"
                    CornerRadius="4"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    Margin="0,0,0,20">
                <Border.Background>
                    <SolidColorBrush x:Name="PreviewBrush" Color="{Binding SelectedColor, RelativeSource={RelativeSource AncestorType=Window}}"/>
                </Border.Background>
            </Border>

            <!-- Color Sliders -->
            <StackPanel Grid.Row="2" Margin="0,0,0,20">
                <!-- Red -->
                <Grid Margin="0,0,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="50"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="R" Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                    <Slider Grid.Column="1"
                            x:Name="RedSlider"
                            Minimum="0"
                            Maximum="255"
                            Value="{Binding RedValue, RelativeSource={RelativeSource AncestorType=Window}}"
                            TickFrequency="1"
                            IsSnapToTickEnabled="True"
                            Margin="8,0"/>
                    <TextBox Grid.Column="2"
                             Text="{Binding Value, ElementName=RedSlider, UpdateSourceTrigger=PropertyChanged}"
                             VerticalAlignment="Center"
                             HorizontalContentAlignment="Center"
                             Background="{DynamicResource SurfaceBrush}"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             BorderBrush="{DynamicResource BorderBrush}"
                             Padding="4"/>
                </Grid>

                <!-- Green -->
                <Grid Margin="0,0,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="50"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="G" Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                    <Slider Grid.Column="1"
                            x:Name="GreenSlider"
                            Minimum="0"
                            Maximum="255"
                            Value="{Binding GreenValue, RelativeSource={RelativeSource AncestorType=Window}}"
                            TickFrequency="1"
                            IsSnapToTickEnabled="True"
                            Margin="8,0"/>
                    <TextBox Grid.Column="2"
                             Text="{Binding Value, ElementName=GreenSlider, UpdateSourceTrigger=PropertyChanged}"
                             VerticalAlignment="Center"
                             HorizontalContentAlignment="Center"
                             Background="{DynamicResource SurfaceBrush}"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             BorderBrush="{DynamicResource BorderBrush}"
                             Padding="4"/>
                </Grid>

                <!-- Blue -->
                <Grid Margin="0,0,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="50"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="B" Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                    <Slider Grid.Column="1"
                            x:Name="BlueSlider"
                            Minimum="0"
                            Maximum="255"
                            Value="{Binding BlueValue, RelativeSource={RelativeSource AncestorType=Window}}"
                            TickFrequency="1"
                            IsSnapToTickEnabled="True"
                            Margin="8,0"/>
                    <TextBox Grid.Column="2"
                             Text="{Binding Value, ElementName=BlueSlider, UpdateSourceTrigger=PropertyChanged}"
                             VerticalAlignment="Center"
                             HorizontalContentAlignment="Center"
                             Background="{DynamicResource SurfaceBrush}"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             BorderBrush="{DynamicResource BorderBrush}"
                             Padding="4"/>
                </Grid>

                <!-- Hex Input -->
                <Grid Margin="0,12,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="50"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Hex:" Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1"
                             x:Name="HexTextBox"
                             Text="{Binding HexValue, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged}"
                             VerticalAlignment="Center"
                             Background="{DynamicResource SurfaceBrush}"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             BorderBrush="{DynamicResource BorderBrush}"
                             FontFamily="Consolas"
                             Padding="8,4"
                             MaxLength="7"/>
                </Grid>
            </StackPanel>

            <!-- Buttons -->
            <Grid Grid.Row="4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0"
                        Content="Cancel"
                        Height="36"
                        Margin="0,0,8,0"
                        Click="Cancel_Click"
                        Style="{StaticResource ModernButton}"/>

                <Button Grid.Column="1"
                        Content="OK"
                        Height="36"
                        Margin="8,0,0,0"
                        Click="OK_Click"
                        Style="{StaticResource ModernButton}"/>
            </Grid>
        </Grid>
    </Border>
</Window>
